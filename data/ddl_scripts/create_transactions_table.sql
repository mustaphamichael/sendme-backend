CREATE TABLE TRANSACTIONS(
  ID BIGSERIAL UNIQUE,
  ACCOUNT_ID BIGINT NOT NULL,
  USER_ID BIGINT NOT NULL,
  TRANSACTION_CODE TEXT NOT NULL,
  TRANSACTION_AMOUNT NUMERIC(15,2) NOT NULL,
  TRANSACTION_TYPE TEXT NOT NULL,
  TRANSACTION_STATUS TEXT NOT NULL,
  TRANSACTION_DESCRIPTION TEXT NOT NULL,
  CREATED_AT TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  UPDATED_AT TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  CONSTRAINT FK_ACCOUNTS FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNTS(ID),
  CONSTRAINT FK_USERS FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

CREATE INDEX ON TRANSACTIONS(ACCOUNT_ID, USER_ID, TRANSACTION_CODE);
